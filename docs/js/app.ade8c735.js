(function(t){function e(e){for(var s,o,a=e[0],l=e[1],c=e[2],d=0,f=[];d<a.length;d++)o=a[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&f.push(r[o][0]),r[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(e);while(f.length)f.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],s=!0,a=1;a<n.length;a++){var l=n[a];0!==r[l]&&(s=!1)}s&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var s={},r={app:0},i=[];function o(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=s,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(n,s,function(e){return t[e]}.bind(null,s));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=e,a=a.slice();for(var c=0;c<a.length;c++)e(a[c]);var u=l;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"075c":function(t,e,n){},"292b":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);var s,r=n("2b0e"),i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("HelloWorld",{attrs:{msg:"Welcome to Your Vue.js App"}})],1)},o=[],a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"save",on:{click:t.save}},[t._v("保存")]),e("div",{staticClass:"save input",on:{click:t.input}},[t._v("输入")]),e("div",{staticClass:"col-8"},[e("h3",[t._v("Nested draggable")]),e("nested-draggable",{staticStyle:{width:"375px",margin:"auto",border:"3px solid black"},attrs:{tasks:t.list}})],1),e("div",{staticClass:"col-9"},[e("myform",{attrs:{selTask:t.selTask},on:{changeForm:t.changeForm}})],1)])},l=[],c=n("ade3");n("14d9");class u{constructor(){}static findNodeById(t,e){for(let n=0;n<t.length;n++){const s=t[n];if(s.id===e)return s;if(s.tasks&&s.tasks.length>0){const t=this.findNodeById(s.tasks,e);if(t)return t}}return null}}s=u,Object(c["a"])(u,"eventbus",new r["default"]),Object(c["a"])(u,"objectToStyleString",t=>{let e="";for(let n in t)if(t.hasOwnProperty(n)){let s=t[n];e+=n+": "+s+";\n"}return e.trim()}),Object(c["a"])(u,"cssToJs",t=>{for(var e=t.split(";"),n={},s=0;s<e.length;s++){var r=e[s].trim();if(""!==r){var i=r.split(":"),o=i[0].trim(),a=i[1].trim();n[o]=a}}return n}),Object(c["a"])(u,"formData",{width:{"100%":"","40px":""},margin:{auto:"",unset:""},display:{block:[],flex:[{"flex-direction":{row:"",column:""}},{"justify-content":{normal:"",center:"","flex-start":"","flex-end":"","space-around":"","space-between":"","space-evenly":""}},{"align-items":{normal:"",center:"","flex-start":"","flex-end":""}},{"flex-wrap":{nowrap:"",warp:""}},{"align-content":{normal:"",center:"","flex-start":"","flex-end":"","space-around":"","space-between":""}}]}}),Object(c["a"])(u,"traverseObject",(function(t,e,n){t||(t=s.formData);for(const r in t)if(t.hasOwnProperty(r)){const i=t[r];if(Array.isArray(i)){if(n!=r)continue;console.log(i),i.forEach(t=>{s.traverseObject.call(this,t,e)})}else"object"===typeof i&&null!==i?(e.push({key:r,value:Object.keys(i)}),s.traverseObject.call(this,i,e,this.form[r])):""===i&&console.log("Empty string")}})),Object(c["a"])(u,"findAndDoThings",(function(t,e,n){function s(t,r,i){if(t.id===e)return n(t,r,i),!0;if(t.tasks)for(let e=0;e<t.tasks.length;e++)if(s(t.tasks[e],t.tasks,e))return!0;return!1}function r(t){return JSON.parse(JSON.stringify(t))}return t=r(t),s(t,null,null),t})),Object(c["a"])(u,"findAndCopyNode",(function(t,e){function n(t){if("object"!==typeof t||null===t)return t;let e=Array.isArray(t)?[]:{};for(let s in t)t.hasOwnProperty(s)&&(e[s]=n(t[s]));return e.hasOwnProperty("id")&&(e.id=Date.now()),e}return t=s.findAndDoThings(t,e,(t,e,s)=>{const r=n(t);e.splice(s+1,0,r)}),t})),Object(c["a"])(u,"findAndCssIt",(function(t,e,n){return t=s.findAndDoThings(t,e,t=>{t.css=n}),t})),Object(c["a"])(u,"findAndDelIt",(function(t,e){return t=s.findAndDoThings(t,e,(t,e,n)=>{e.splice(n,1)}),t}));var d=function(){var t=this,e=t._self._c;return e("draggable",{staticClass:"dragArea",attrs:{tag:"div","chosen-class":"chosen",list:t.tasks,group:{name:"g1"}}},[t._l(t.tasks,(function(n){return e("nested-draggable",{key:n.id,class:n.name,style:n.css,attrs:{tasks:n.tasks},nativeOn:{click:function(e){return e.stopPropagation(),t.selOne(n.id)},dblclick:function(e){return e.stopPropagation(),t.handleDBC(n)},contextmenu:function(e){return e.preventDefault(),e.stopPropagation(),t.handleContextMenu(e,n)}}})})),e("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:14},placeholder:""},model:{value:t.cssVal,callback:function(e){t.cssVal=e},expression:"cssVal"}}),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.delItem}},[t._v("删 除")]),e("el-button",{attrs:{type:"primary"},on:{click:t.cmtCss}},[t._v("确 定")])],1)],1)],2)},f=[],p=n("b76a"),m=n.n(p),h={props:{tasks:{required:!0,type:Array}},data(){return{cssVal:"",item:{},dialogVisible:!1}},components:{draggable:m.a},methods:{selOne(t){u.eventbus.$emit("selOne",t)},delItem(){this.dialogVisible=!1,u.eventbus.$emit("delItem",{id:this.item.id})},cmtCss(){this.dialogVisible=!1;let t=u.objectToStyleString({...u.cssToJs(this.cssVal)});u.eventbus.$emit("commit",{id:this.item.id,css:t})},handleDBC(t){this.dialogVisible=!0,this.cssVal=t.css,this.item=t},handleContextMenu(...t){console.log(t,"Right-click event triggered"),u.eventbus.$emit("复制",t[1].id)}},name:"nested-draggable"},b=h,g=(n("7fd6"),n("2877")),v=Object(g["a"])(b,d,f,!1,null,null,null),y=v.exports,k=function(){var t=this,e=t._self._c;return e("div",[e("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px",size:"mini"}},[t._v(" "+t._s("id:"+t.selTask.id)+" "),t._l(t.arr,(function(n,s){return e("el-form-item",{key:s,attrs:{label:n.key}},[e("el-radio-group",{model:{value:t.form[n.key],callback:function(e){t.$set(t.form,n.key,e)},expression:"form[i.key]"}},t._l(n.value,(function(t){return e("el-radio",{key:t,attrs:{label:t}})})),1)],1)})),e("pre",{domProps:{innerHTML:t._s(t.selTask.css)}})],2)],1)},O=[],x={data(){return{form:{display:""}}},computed:{arr(){let t=[];return u.traverseObject.call(this,null,t,this.form.display),console.log(t,"========"),t}},watch:{form:{deep:!0,handler:function(t){this.$emit("changeForm",t)}}},props:{selTask:{required:!0,type:Object}}},j=x,w=Object(g["a"])(j,k,O,!1,null,null,null),_=w.exports,T={name:"nested-example",display:"Nested",order:15,components:{myform:_,nestedDraggable:y},created(){u.eventbus.$on("selOne",t=>{this.selIndex=t}),u.eventbus.$on("delItem",t=>{let e=u.findAndDelIt({id:-1,tasks:[...this.list]},t.id);console.log(e),this.list=e.tasks}),u.eventbus.$on("复制",t=>{let e=u.findAndCopyNode({id:-1,tasks:[...this.list]},t);this.list=e.tasks,console.log(e)}),u.eventbus.$on("commit",t=>{console.log(this.list),this.list=u.findAndCssIt({id:-1,tasks:[...this.list]},t.id,t.css).tasks})},computed:{selTask(){return u.findNodeById(this.list,this.selIndex)}},methods:{input(){function t(){return navigator.clipboard.readText()}t().then(t=>{console.log(t),this.list=JSON.parse(t)})},save(){let t=this;console.log(this.list),function(e){document.oncopy=function(n){n.clipboardData.setData("text",e);const s=t.$createElement;t.$notify({title:"标题名称",message:s("i",{style:"color: teal"},"已复制到剪切板。")}),n.preventDefault(),document.oncopy=null}}(JSON.stringify(t.list)),document.execCommand("Copy")},changeForm(t){let e=this.selTask;e.css=u.objectToStyleString({...u.cssToJs(e.css),...t}),this.list=[...this.list]}},data(){return{selIndex:0,list:[{name:"task 1",id:0,css:"",tasks:[{name:"task 2",id:1,css:"",tasks:[]}]},{name:"task 3",id:2,css:"",tasks:[{name:"task 4",id:3,css:"",tasks:[]}]},{name:"task 5",id:4,css:"",tasks:[]}]}}},C=T,A=(n("c6f5"),Object(g["a"])(C,a,l,!1,null,null,null)),D=A.exports,S=n("5c96"),I=n.n(S);n("0fae");r["default"].use(I.a);var P={name:"App",data(){return{enabled:!0,list:[{name:"John",id:0},{name:"Joao",id:1},{name:"Jean",id:2}],dragging:!1}},methods:{checkMove:function(t){window.console.log("Future index: "+t.draggedContext.futureIndex)}},components:{HelloWorld:D}},V=P,$=(n("6da3"),Object(g["a"])(V,i,o,!1,null,null,null)),J=$.exports;r["default"].config.productionTip=!1,new r["default"]({render:t=>t(J)}).$mount("#app")},"6bec":function(t,e,n){},"6da3":function(t,e,n){"use strict";n("075c")},"7fd6":function(t,e,n){"use strict";n("292b")},c6f5:function(t,e,n){"use strict";n("6bec")}});
//# sourceMappingURL=app.ade8c735.js.map